#!/usr/bin/env bash
awk -v fil=$1 '
BEGIN{
i=0;
}
{
    if ( $0 ~ /(01-(0[1-9]|[12][0-9]|3[0-1])|02-(0[1-9]|1[0-9]|2[0-9])|03-(0[1-9]|[12][0-9]|3[0-1])|04-(0[1-9]|[12][0-9]|30)|05-(0[1-9]|[12][0-9]|3[0-1])|06-(0[1-9]|[12][0-9]|30)|07-(0[1-9]|[12][0-9]|3[0-1])|08-(0[1-9]|[12][0-9]|3[0-1])|09-(0[1-9]|[12][0-9]|30)|10-(0[1-9]|[12][0-9]|3[0-1])|11-(0[1-9]|[12][0-9]|30)|12-(0[1-9]|[12][0-9]|3[0-1]))[ ]+([0-1][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9]\.[0-9]{3}[ ]+[0-9]+[ ]+[0-9]+[ ]+(V|D|I|W|E|A|F|S)[ ]+.+/){
        i+=1;
    }
}

END{
    if(i==NR){
        system("bash make_android_csv.sh events_android.csv " fil);
    }
    else{
        system("echo err");
        system("rm "fil);
    }
}
' "$1"